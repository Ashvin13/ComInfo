<%- model_class = Company -%>
<div class="page-header">
  <h1><%=t '.title', :default => [:'helpers.titles.new', 'New %{model}'], :model => model_class.model_name.human.titleize %></h1>
</div>
<div class="container">
  <ul class="nav nav-tabs">
    <li class="active"><a href="#tab1" data-toggle="tab">Company Info</a></li>
    <li><a href="#tab2" data-toggle="tab">User Info</a></li>
  </ul>
  <%= form_for @company, :html => { :class => "form-horizontal company" } do |f| %>
  	<div class="error-div">
  		<% if @company.errors.any? %>
		    <div id="error_expl" class="panel panel-danger">
		      <div class="panel-heading">
		        <h3 class="panel-title"><%= pluralize(@company.errors.count, "error") %> prohibited this company from being saved:</h3>
		      </div>
		      <div class="panel-body">
		        <ul>
		        <% @company.errors.full_messages.each do |msg| %>
		          <li><%= msg %></li>
		        <% end %>
		        </ul>
		      </div>
		    </div>
		  <% end %>
  	</div>
	  <div class="tab-content">
	    <div class="tab-pane active" id="tab1">
	      <div class="row">
	        <div class="col-lg-12">
	          	<div class="form-group">
	              <%= f.label :cname, "Company name:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= f.text_field :cname, class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= f.label :regno, "Reg. No:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= f.text_field :regno, class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= f.label :startdate, "Startdate:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= f.text_field :startdate, 'data-behaviour' => 'datepicker', class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= f.label :enddate, "Enddate:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= f.text_field :enddate, 'data-behaviour' => 'datepicker', class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= f.label :cdescription, "Description:", class: "col-md-4 control-label" %>
	              <div class="col-md-8">
	                <%= f.text_area :cdescription, class: "form-control" %>
	              </div>
	            </div>

	            <div class="col-md-12 com_submit">
	              <a class="btn btn-primary btnNext compI_next" >Next</a>
	            </div>
	        </div>
	      </div>
	    </div>
	    <div class="tab-pane" id="tab2">
	      <div class="row">
	        <div class="col-lg-12">
	          <%= f.fields_for :users do |u| %>
	            <div class="form-group">
	              <%= u.label :email, "Email:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= u.email_field :email, autofocus: true, class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :password, "Password:", class: "col-md-4 control-label required" %>
	              <% if @minimum_password_length %>
	                <em>(<%= @minimum_password_length %> characters minimum)</em>
	              <% end %>
	              <div class="col-md-8">
	                <%= u.password_field :password, autocomplete: "off", class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :password_confirmation, "Password_confirmation:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= u.password_field :password_confirmation, autocomplete: "off", class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :uname, "User name:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= u.text_field :uname, class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :phone_no, "Phone-no:", class: "col-md-4 control-label" %>
	              <div class="col-md-8">
	                <%= u.text_field :phone_no, class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :date_of_birth, "Date_of_birth:", class: "col-md-4 control-label" %>
	              <div class="col-md-8">
	                <%= u.text_field :date_of_birth, 'data-behaviour' => 'datepicker', class: "form-control" %>
	              </div>
	            </div>

	            <div class="form-group">
	              <%= u.label :user_type, "User_type:", class: "col-md-4 control-label required" %>
	              <div class="col-md-8">
	                <%= u.select(:user_type, User::USER_TYPES, {} ,{ class: "form-control" }) %>
	              </div>
	            </div>
	          <% end %>
	            <div class="col-md-12 nest-subbtn">
	              <%= f.submit "Submit", class: "btn btn-primary nest-sub-pera" %>
	            </div>
        	</div>
      	</div>
    	</div>
  	</div>
  <% end %>
</div>

<script type="text/javascript">
  $(document).ready(function(){
    $('.btnNext').click(function(){
      $('.nav-tabs > .active').next('li').find('a').trigger('click');
    });

    $('.btnPrevious').click(function(){
      $('.nav-tabs > .active').prev('li').find('a').trigger('click');
    });
    $('[data-behaviour=datepicker]').datepicker({format: 'yyyy-mm-dd'});
  });
</script>